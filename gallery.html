<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Bateson Family Lights | Gallery</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<meta name="description" content="Photo gallery of Bateson Family Lights displays over the years." />

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">

	<style>
		:root {
			--bg: #04040b;
			--bg-alt: #0c1020;
			--card: #101627;
			--accent-green: #22c55e;
			--accent-red: #fb7185;
			--text-main: #f5f7ff;
			--text-muted: #9ca3c7;
			--border-subtle: rgba(255, 255, 255, 0.06);
			--shadow-soft: 0 18px 40px rgba(0, 0, 0, 0.75);
			--radius-xl: 24px;
		}

		*,
		*::before,
		*::after {
			box-sizing: border-box;
		}

		html,
		body {
			margin: 0;
			padding: 0;
		}

		body {
			font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
				sans-serif;
			background:
				radial-gradient(circle at top, #102540 0, #04040b 55%, #020208 100%),
				url("https://images.pexels.com/photos/6880135/pexels-photo-6880135.jpeg?auto=compress&cs=tinysrgb&w=1200")
					center/cover fixed;
			color: var(--text-main);
			min-height: 100vh;
			display: flex;
			justify-content: center;
			align-items: flex-start;
		}

		main {
			width: 100%;
			max-width: 960px;
			padding: 16px 16px 40px;
			margin: 0 auto 40px;
		}

		/* =========================
		   NAV PILL (COLLAPSIBLE)
		=========================*/
		.nav {
			position: sticky;
			top: 8px;
			z-index: 50;
			margin: 0 auto;
			max-width: 520px;
			padding: 6px 8px;
			border-radius: 999px;
			background: rgba(15, 23, 42, 0.92);
			border: 1px solid rgba(148, 163, 184, 0.3);
			box-shadow: 0 10px 26px rgba(0, 0, 0, 0.7);
			backdrop-filter: blur(10px);
			display: flex;
			flex-direction: column;
			gap: 4px;
		}

		.nav-toggle {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 8px;
			width: 100%;
			padding: 4px 8px;
			border-radius: 999px;
			border: none;
			background: transparent;
			color: var(--text-main);
			cursor: pointer;
		}

		.nav-toggle:focus-visible {
			outline: 2px solid var(--accent-green);
			outline-offset: 2px;
		}

		.nav-title {
			display: flex;
			align-items: center;
			gap: 6px;
			font-size: 0.9rem;
			font-weight: 600;
			width: 100%;
			justify-content: center;
		}

		.logo-script {
			font-family: "Pacifico", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
			font-size: 1.05rem;
		}

		.nav-toggle-label {
			font-size: 0.8rem;
			color: var(--text-muted);
			margin-left: auto;
		}

		.nav-toggle-icon {
			font-size: 0.85rem;
			transition: transform 0.18s ease;
		}

		.nav-links {
			display: flex;
			align-items: center;
			justify-content: center;
			gap: 4px;
			padding: 6px 6px 8px;
			font-size: 0.82rem;
			flex-wrap: wrap;

			max-height: 260px;
			overflow: hidden;
			opacity: 1;
			transform-origin: top;
			transform: scaleY(1);
			transition:
				max-height 0.18s ease,
				opacity 0.18s ease,
				transform 0.18s ease;
		}

		/* collapsed state */
		.nav.nav-collapsed .nav-links {
			max-height: 0;
			opacity: 0;
			transform: scaleY(0.9);
			padding-top: 0;
			padding-bottom: 0;
		}

		.nav.nav-collapsed .nav-toggle-icon {
			transform: rotate(0deg);
		}

		.nav:not(.nav-collapsed) .nav-toggle-icon {
			transform: rotate(180deg);
		}

		.nav-links a {
			color: var(--text-muted);
			text-decoration: none;
			padding: 3px 8px;
			border-radius: 999px;
			border: 1px solid transparent;
			transition: background 0.12s, color 0.12s, border-color 0.12s;
			white-space: nowrap;
		}

		.nav-links a:hover {
			background: rgba(15, 23, 42, 0.95);
			color: var(--text-main);
			border-color: rgba(148, 163, 184, 0.6);
		}

		.nav-links a.nav-active {
			background: rgba(34, 197, 94, 0.2);
			border-color: rgba(34, 197, 94, 0.7);
			color: #bbf7d0;
		}

		.disabled-nav {
			opacity: 0.4;
			pointer-events: none;
		}

		@media (max-width: 640px) {
			.nav {
				max-width: 100%;
				border-radius: 18px;
			}

			.nav-links {
				flex-wrap: wrap;
				justify-content: center;
				gap: 4px;
			}

			.nav-links a {
				flex: 0 0 auto;
				text-align: center;
				padding: 4px 8px;
			}
		}

		.hamburger-icon {
			display: flex;
			flex-direction: column;
			gap: 3px;
			width: 18px;
		}

		.hamburger-icon span {
			display: block;
			height: 2px;
			width: 100%;
			background: var(--text-main);
			border-radius: 2px;
			transition: transform 0.2s ease, opacity 0.2s ease;
		}

		/* transform when open */
		.nav:not(.nav-collapsed) .hamburger-icon span:nth-child(1) {
			transform: translateY(5px) rotate(45deg);
		}
		.nav:not(.nav-collapsed) .hamburger-icon span:nth-child(2) {
			opacity: 0;
		}
		.nav:not(.nav-collapsed) .hamburger-icon span:nth-child(3) {
			transform: translateY(-5px) rotate(-45deg);
		}

		/* STRING LIGHTS DECORATION */
		.string-lights {
			position: relative;
			height: 32px;
			margin: 10px 0 -8px;
		}

		.string-lights::before {
			content: "";
			position: absolute;
			left: 0;
			right: 0;
			top: 12px;
			height: 2px;
			background: rgba(148, 163, 184, 0.4);
			border-radius: 999px;
		}

		.bulb {
			position: absolute;
			top: 10px;
			width: 10px;
			height: 16px;
			border-radius: 40% 40% 60% 60%;
			background: #22c55e;
			box-shadow: 0 0 12px rgba(34, 197, 94, 0.8);
			transform-origin: top center;
			animation: sway 3s ease-in-out infinite alternate;
		}

		.bulb.red {
			background: var(--accent-red);
			box-shadow: 0 0 14px rgba(251, 113, 133, 0.9);
		}

		.bulb.gold {
			background: #fbbf24;
			box-shadow: 0 0 14px rgba(251, 191, 36, 0.9);
		}

		.bulb:nth-child(1) { left: 10%; animation-delay: 0s; }
		.bulb:nth-child(2) { left: 25%; animation-delay: 0.4s; }
		.bulb:nth-child(3) { left: 40%; animation-delay: 0.8s; }
		.bulb:nth-child(4) { left: 55%; animation-delay: 1.2s; }
		.bulb:nth-child(5) { left: 70%; animation-delay: 1.6s; }
		.bulb:nth-child(6) { left: 85%; animation-delay: 2s; }

		@keyframes sway {
			from { transform: rotate(-6deg); }
			to   { transform: rotate(6deg); }
		}

		.hero {
			background: rgba(7, 10, 25, 0.55);
			border-radius: var(--radius-xl);
			box-shadow: var(--shadow-soft);
			padding: 6px 18px 10px;
			border: 1px solid var(--border-subtle);
			position: relative;
			overflow: hidden;
			margin-top: 15px !important;
		}

		.hero::before {
			display: none;
		}

		.hero-inner {
			position: relative;
			z-index: 1;
		}

		.hero-top {
			display: grid;
			grid-template-columns: minmax(0, 1fr);
			gap: 14px;
			align-items: stretch;
		}

		.badge {
			display: inline-flex;
			align-items: center;
			gap: 6px;
			font-size: 0.7rem;
			text-transform: uppercase;
			letter-spacing: 0.12em;
			background: rgba(0, 0, 0, 0.55);
			border-radius: 999px;
			padding: 4px 10px;
			color: var(--text-muted);
			border: 1px solid rgba(255, 255, 255, 0.08);
			margin-bottom: 2px;
		}

		.hero-title {
			font-size: clamp(2.1rem, 4vw, 2.6rem);
			font-weight: 800;
			letter-spacing: 0.03em;
			margin: 0;
			display: flex;
			align-items: center;
			gap: 10px;
		}

		.hero-title .em {
			font-family: "Pacifico", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
			text-transform: none;
			font-size: clamp(2.4rem, 4.6vw, 3rem);
			color: var(--accent-green);
			text-shadow: 0 0 16px rgba(34, 197, 94, 0.9);
			font-weight: 400;
			letter-spacing: 0.04em;
		}

		.hero-subtitle {
			margin: 6px 0 10px;
			font-size: 0.98rem;
			color: var(--text-muted);
			max-width: 36rem;
		}

		/* FOOTER */

		.footer {
			margin-top: 18px;
			padding: 10px 6px 0;
			font-size: 0.78rem;
			color: var(--text-muted);
			display: flex;
			justify-content: space-between;
			gap: 12px;
			border-top: 1px solid rgba(148, 163, 184, 0.18);
		}

		.footer a {
			color: var(--accent-green);
			text-decoration: none;
		}

		.footer a:hover {
			text-decoration: underline;
		}

		@media (max-width: 768px) {
			.hero {
				padding: 12px 12px 18px;
			}

			.footer {
				flex-direction: column;
				align-items: flex-start;
			}
		}

		/* Make nav logo bigger and green */
		.logo-script {
			font-size: 1.35rem;
			color: var(--accent-green);
			text-shadow: 0 0 10px rgba(34, 197, 94, 0.45);
		}

		/* ==============
		   GALLERY STUFF
		===============*/

		.gallery-card {
			margin-top: 16px;
			background: var(--bg-alt);
			border-radius: var(--radius-xl);
			border: 1px solid var(--border-subtle);
			padding: 16px 14px 18px;
			box-shadow: 0 10px 26px rgba(0, 0, 0, 0.7);
		}

		.gallery-intro {
			font-size: 0.9rem;
			color: var(--text-muted);
			margin: 4px 0 10px;
		}

		.gallery-year {
			margin-top: 18px;
		}

		/* Make the year header look like a clickable pill */
		.gallery-year h2 {
			cursor: pointer;
			padding: 4px 10px;
			border-radius: 999px;
			background: rgba(15, 23, 42, 0.9);
			border: 1px solid rgba(148, 163, 184, 0.45);
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.gallery-year h2 span.year-label {			
			font-family: "Pacifico", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
			text-transform: none;
			font-size: clamp(1.8rem, 3.6vw, 2.4rem);
			color: var(--accent-green);
			text-shadow: 0 0 16px rgba(34, 197, 94, 0.9);
			font-weight: 400;
			letter-spacing: 0.04em;			
		}

		.gallery-year h2 span.year-pill {
			font-size: 0.75rem;
			padding: 3px 8px;
			border-radius: 999px;
			background: rgba(15, 23, 42, 0.9);
			border: 1px solid rgba(148, 163, 184, 0.5);
			color: var(--text-muted);
		}
		
		/* Add a little caret arrow at the end of the header */
		.gallery-year h2::after {
			content: "â–¾";
			margin-left: auto;
			font-size: 0.85rem;
			opacity: 0.8;
			transition: transform 0.2s ease;
		}
		
		/* Rotate caret when collapsed */
		.gallery-year.collapsed h2::after {
			transform: rotate(-90deg);
		}

		/* Make the grid collapsible */
		.gallery-grid {
			display: grid;
			grid-template-columns: repeat(3, minmax(0, 1fr));
			gap: 10px;
		
			/* NEW bits for collapsing */
			max-height: 1200px;
			overflow: hidden;
			opacity: 1;
			transform-origin: top;
			transform: scaleY(1);
			transition:
				max-height 0.22s ease,
				opacity 0.18s ease,
				transform 0.18s ease,
				margin-top 0.18s ease;
			margin-top: 10px;
		}
		
		/* When collapsed, hide the grid */
		.gallery-year.collapsed .gallery-grid {
			max-height: 0;
			opacity: 0;
			transform: scaleY(0.96);
			margin-top: 0;
		}

		.gallery-grid a {
			display: block;
			border-radius: 16px;
			overflow: hidden;
			border: 1px solid rgba(148, 163, 184, 0.4);
			box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7);
			background: #020617;
			transition:
				transform 0.12s ease-out,
				box-shadow 0.12s ease-out,
				border-color 0.12s ease-out;
		}

		.gallery-grid a:hover {
			transform: translateY(-2px);
			box-shadow: 0 14px 30px rgba(0, 0, 0, 0.85);
			border-color: rgba(96, 165, 250, 0.9);
		}

		.gallery-thumb {
			display: block;
			width: 100%;
			height: 190px;
			object-fit: cover;
		}

		@media (max-width: 900px) {
			.gallery-grid {
				grid-template-columns: repeat(2, minmax(0, 1fr));
			}
		}

		@media (max-width: 640px) {
			.gallery-grid {
				grid-template-columns: minmax(0, 1fr);
			}

			.gallery-thumb {
				height: 220px;
			}
		}
	</style>

	<script>
		// Make each gallery year collapsible (default collapsed)
		(function () {
			const yearBlocks = document.querySelectorAll(".gallery-year");
	
			yearBlocks.forEach((yearEl) => {
				const header = yearEl.querySelector("h2");
				const grid = yearEl.querySelector(".gallery-grid");
				if (!header || !grid) return;
	
				// Start collapsed by default
				const year = yearEl.getAttribute("data-year");

				// Collapse everything except 2025
				if (year !== "2025") {
					yearEl.classList.add("collapsed");
				}
	
				header.addEventListener("click", () => {
					yearEl.classList.toggle("collapsed");
				});
			});
		})();
	</script>

</head>
<body>
	<main id="top">
		<!-- NAV -->
		<nav class="nav nav-collapsed">
			<button class="nav-toggle" type="button" aria-expanded="false" aria-controls="nav-links">
				<div class="nav-title">
					<span>ðŸŽ„ </span>
					<span class="logo-script">Bateson Family Lights</span>
					<span> ðŸŽ„</span>
				</div>
				<span class="hamburger-icon">
					<span></span>
					<span></span>
					<span></span>
				</span>
			</button>
			<div class="nav-links" id="nav-links">
				<a href="index.html">Home</a>
				<a id="nav-listen-link" href="https://pulsemesh.io/d/SGVT/smart" target="_blank">Listen Live</a>
				<a id="nav-requests-link" href="index.html#jukebox">Requests</a>
				<a href="gallery.html" class="nav-active">Gallery</a>
				<a href="local-shows.html">Local Shows</a>
				<a href="contact.html">Contact Us</a>
			</div>
		</nav>

		<div class="string-lights">
			<div class="bulb"></div>
			<div class="bulb red"></div>
			<div class="bulb gold"></div>
			<div class="bulb"></div>
			<div class="bulb red"></div>
			<div class="bulb gold"></div>
		</div>

		<!-- HERO (simple title for gallery) -->
		<section class="hero">
			<div class="hero-inner">
				<div class="hero-top">
					<div>
						<div class="badge">
							<span>ðŸ“¸</span>
							<span>Bateson Family Lights â€¢ Display Gallery</span>
						</div>

						<h1 class="hero-title">
							<span class="em">Display Gallery</span>
						</h1>

						<p class="hero-subtitle">
							A look back at Bateson Family Lights through the years.<br> 
							Tap any photo to view a larger version in a new tab.
						</p>
					</div>
				</div>
			</div>
		</section>

		<!-- GALLERY CONTENT -->
		<!-- GALLERY CONTENT (auto-loaded from GitHub) -->
<section class="gallery-card" id="gallery-root">
	<!-- Just define the years; JS will fill in the images -->
	<div class="gallery-year" data-year="2025">
		<h2>
			<span class="year-label">2025</span>
			<span class="year-pill">Most recent</span>
		</h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2024">
		<h2><span class="year-label">2024</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2023">
		<h2><span class="year-label">2023</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2022">
		<h2><span class="year-label">2022</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2021">
		<h2><span class="year-label">2021</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2020">
		<h2><span class="year-label">2020</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2019">
		<h2><span class="year-label">2019</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2018">
		<h2><span class="year-label">2018</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2017">
		<h2><span class="year-label">2017</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2016">
		<h2><span class="year-label">2016</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2015">
		<h2><span class="year-label">2015</span></h2>
		<div class="gallery-grid"></div>
	</div>

	<div class="gallery-year" data-year="2014">
		<h2><span class="year-label">2014</span>
			<span class="year-pill">Year One</span></h2>
		<div class="gallery-grid"></div>
	</div>
</section>


		<footer class="footer">
			<div>Â© <span id="year"></span> Bateson Family Lights. All rights reserved.</div>
			<div>
				Created by the Bateson family â€¢ Merry Christmas & Happy Holidays! ðŸŽ…
			</div>
		</footer>
	</main>

	<script>
		// NAV COLLAPSE / EXPAND
		(function () {
			const nav = document.querySelector(".nav");
			const toggle = document.querySelector(".nav-toggle");
			const links = document.getElementById("nav-links");
			if (!nav || !toggle || !links) return;

			nav.classList.add("nav-collapsed");
			toggle.setAttribute("aria-expanded", "false");

			function setExpanded(expanded) {
				if (expanded) {
					nav.classList.remove("nav-collapsed");
				} else {
					nav.classList.add("nav-collapsed");
				}
				toggle.setAttribute("aria-expanded", expanded ? "true" : "false");
			}

			toggle.addEventListener("click", () => {
				const isExpanded = toggle.getAttribute("aria-expanded") === "true";
				setExpanded(!isExpanded);
			});
		})();

		// footer year
		document.getElementById("year").textContent = new Date().getFullYear();
	</script>
	
	<script>
	// Auto-load gallery images from GitHub /images/<year>/ folders
	(function () {
		const GITHUB_USER = "SteelJ0ker";
		const REPO = "batesonlights";
		const BRANCH = "main";

		const years = [
			2025, 2024, 2023, 2022, 2021,
			2020, 2019, 2018, 2017, 2016,
			2015, 2014
		];

		years.forEach((year) => {
			const yearEl = document.querySelector(
				'.gallery-year[data-year="' + year + '"]'
			);
			if (!yearEl) return;

			const grid = yearEl.querySelector(".gallery-grid");
			if (!grid) return;

			const apiUrl =
				"https://api.github.com/repos/" +
				GITHUB_USER +
				"/" +
				REPO +
				"/contents/images/" +
				year;

			fetch(apiUrl)
				.then((resp) => {
					if (!resp.ok) {
						console.warn("No images for year", year, resp.status);
						return [];
					}
					return resp.json();
				})
				.then((files) => {
					if (!Array.isArray(files)) return;

					files
						.filter((f) => f.type === "file" && /\.(jpe?g|png|gif|webp)$/i.test(f.name))
						.forEach((file) => {
							const rawUrl =
								"https://raw.githubusercontent.com/" +
								GITHUB_USER +
								"/" +
								REPO +
								"/" +
								BRANCH +
								"/images/" +
								year +
								"/" +
								file.name;

							const a = document.createElement("a");
							a.href = rawUrl;
							a.target = "_blank";
							a.rel = "noopener noreferrer";

							const img = document.createElement("img");
							img.src = rawUrl;
							img.loading = "lazy";
							img.alt = "Bateson Family Lights " + year;
							img.className = "gallery-thumb";

							a.appendChild(img);
							grid.appendChild(a);
						});
				})
				.catch((err) => {
					console.error("Error loading images for year", year, err);
				});
		});
	})();
</script>

<!-- Control Listen Live and Requests lionk being active -->
<script>
// ====== SAME ON-AIR LOGIC USED IN INDEX ======

const RF_OVERRIDE_MODE = "auto";   // leave auto unless you force override

function getEasternNow() {
    const now = new Date();
    const parts = new Intl.DateTimeFormat("en-US", {
        timeZone: "America/New_York",
        year: "numeric",
        month: "numeric",
        day: "numeric",
        hour: "numeric",
        minute: "numeric",
        second: "numeric",
        hour12: false
    }).formatToParts(now);

    const v = {};
    for (const p of parts) {
        if (p.type !== "literal") v[p.type] = parseInt(p.value, 10);
    }

    return new Date(v.year, v.month - 1, v.day, v.hour, v.minute, v.second);
}

function dateToYMDInt(d) {
    return d.getFullYear() * 10000 + (d.getMonth() + 1) * 100 + d.getDate();
}

function getThanksgiving(year) {
    const novFirst = new Date(year, 10, 1);
    const dow = novFirst.getDay();
    const offset = (4 - dow + 7) % 7;
    const firstThu = 1 + offset;
    return new Date(year, 10, firstThu + 21);
}

function isWithinShowWindow(easternNow) {
    const year = easternNow.getFullYear();
    const ymdNow = dateToYMDInt(easternNow);

    const thisThanks = getThanksgiving(year);
    const nextJan2 = new Date(year + 1, 0, 2);

    const prevThanks = getThanksgiving(year - 1);
    const thisJan2 = new Date(year, 0, 2);

    const inSeason =
        (ymdNow >= dateToYMDInt(thisThanks) && ymdNow <= dateToYMDInt(nextJan2)) ||
        (ymdNow >= dateToYMDInt(prevThanks) && ymdNow <= dateToYMDInt(thisJan2));

    if (!inSeason) return false;

    const dow = easternNow.getDay();
    const minutes = easternNow.getHours() * 60 + easternNow.getMinutes();

    const start = 18 * 60;           // 6:00 PM
    const weekdayEnd = 21 * 60 + 30; // 9:30 PM
    const weekendEnd = 23 * 60;      // 11:00 PM

    const end = dow <= 4 ? weekdayEnd : weekendEnd;

    return minutes >= start && minutes < end;
}

function updateNavState() {
    const navListen = document.getElementById("nav-listen-link");
    const navRequests = document.getElementById("nav-requests-link");

    if (!navListen || !navRequests) return;

    let onAir;

    if (RF_OVERRIDE_MODE === "forceon") onAir = true;
    else if (RF_OVERRIDE_MODE === "forceoff") onAir = false;
    else onAir = isWithinShowWindow(getEasternNow());

    if (onAir) {
        // LISTEN enabled
        navListen.classList.remove("disabled-nav");
        navListen.href = "https://pulsemesh.io/d/SGVT/smart";
        navListen.target = "_blank";
        navListen.rel = "noopener noreferrer";

        // REQUESTS enabled
        navRequests.classList.remove("disabled-nav");
        navRequests.href = "index.html#jukebox";
    } else {
        // LISTEN disabled
        navListen.classList.add("disabled-nav");
        navListen.href = "#";
        navListen.removeAttribute("target");
        navListen.removeAttribute("rel");

        // REQUESTS disabled
        navRequests.classList.add("disabled-nav");
        navRequests.href = "#";
    }

    console.log("GALLERY | onAir:", onAir);
}

updateNavState();
setInterval(updateNavState, 60 * 1000);
</script>

<!-- ************************************************* -->

</body>
</html>
